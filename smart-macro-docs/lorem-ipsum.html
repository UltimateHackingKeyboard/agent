<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Smart Macro Lorem Ipsum</title>
    <style>
        code {
            display: block;
            margin-bottom: 0.5rem;
        }
    </style>
</head>
<body>
<code>
    set var 1
</code>
<button id="appendMacro">Insert Macro</button>
<p>
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam consectetur, arcu sagittis ornare tempus, felis ex
    convallis velit, scelerisque tempus quam diam eu elit. Sed pellentesque nisi id ligula luctus hendrerit. Orci varius
    natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Etiam id volutpat turpis, a rhoncus
    tellus. Praesent ligula metus, rutrum et semper nec, dictum vel est. Curabitur scelerisque blandit lacinia.
    Curabitur gravida sagittis massa, a fermentum purus ullamcorper at. Curabitur semper vehicula mattis. Curabitur at
    neque sit amet leo dignissim consectetur sit amet eu purus. Maecenas rutrum tristique tortor, nec lobortis ex.
</p>
<p>
    Quisque fermentum magna vel urna iaculis gravida. Etiam eleifend gravida lorem, sit amet auctor mauris lacinia
    vitae. Duis commodo in purus vel auctor. Cras mollis diam aliquet justo aliquam cursus. Donec pretium scelerisque
    ex, at rhoncus justo congue sed. Curabitur in ante nunc. Nulla lacus odio, rhoncus vel purus vel, interdum lacinia
    mauris. Sed neque leo, mollis sed dui ac, congue blandit lacus. Fusce dapibus augue libero, vitae iaculis lorem
    euismod vitae.
</p>
<p>
    Vestibulum fringilla accumsan nibh nec aliquam. Proin dictum accumsan ornare. Nunc consectetur arcu risus, vitae
    interdum erat efficitur id. Maecenas et elit tortor. Duis eleifend sagittis tincidunt. Suspendisse aliquam ultricies
    commodo. Vestibulum eu diam nec diam lobortis eleifend in vel nulla. Praesent at viverra lectus, eu pellentesque
    erat. Integer finibus rhoncus orci, vitae pulvinar nibh. Sed accumsan vestibulum placerat. Praesent rhoncus tellus
    quis lorem sagittis scelerisque sit amet id orci. Morbi gravida justo sapien, eget vehicula sem mattis sed. Integer
    justo dolor, ullamcorper et justo sit amet, egestas blandit neque. Curabitur in venenatis risus, eget congue arcu.
    Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Maecenas mattis nisl feugiat
    iaculis ultrices.
</p>
<p>
    Nunc rutrum libero risus, sed interdum sapien euismod at. Lorem ipsum dolor sit amet, consectetur adipiscing elit.
    Proin vel risus nulla. Donec viverra eros vel ex lobortis consectetur. Donec non libero sodales, tincidunt ligula
    id, malesuada purus. Integer faucibus ex neque, vitae faucibus mi egestas nec. Suspendisse quis feugiat libero, ut
    sodales eros. Praesent ac laoreet ligula.
</p>
<p>
    In iaculis, leo sed blandit consequat, nibh nulla gravida sem, vel feugiat est mi ut felis. Etiam lacinia sem et
    odio blandit consequat. Pellentesque mauris nunc, sodales sit amet semper ultricies, maximus eget metus. Proin
    accumsan, lectus a tempor blandit, nulla lectus faucibus neque, nec lobortis augue ex non neque. Praesent luctus
    fermentum magna, quis laoreet nulla dignissim a. Nunc vehicula scelerisque justo a elementum. Suspendisse id mauris
    sed metus convallis dapibus vel sit amet nibh. Donec rutrum ipsum vel sodales gravida. Suspendisse vel felis purus.
    Donec volutpat velit quis arcu efficitur, et rhoncus leo congue. Aenean vitae efficitur sem. Nunc non pretium
    turpis, at sodales tortor.
</p>

<script type="module">
    const button = document.getElementById('appendMacro');
    button.addEventListener('click', () => {
        window.parent.postMessage({
            action: 'smd-insert-macro',
            data: 'set var 1'
        }, '*')
    })

    window.addEventListener('message', event => {
        console.log('Message arrived');

        switch (event.data.action) {

            case 'sma-editor-got-focus': {
                button.removeAttribute('disabled');
                break;
            }

            case 'sma-editor-lost-focus': {
                button.setAttribute('disabled', '');
                break;
            }

            default: {
                break;
            }
        }
    });
    window.addEventListener('messageerror', console.error)
    window.parent.postMessage({action: 'smd-inited'}, '*');
</script>
</body>
</html>
